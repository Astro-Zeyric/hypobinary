<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hypocrypt Encoder / Decoder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    background: #0e0e0e;
    color: #eaeaea;
    font-family: monospace;
    margin: 0;
    padding: 20px;
}
.container {
    max-width: 900px;
    margin: auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
h2 {
    text-align: center;
    margin-bottom: 10px;
}
.textarea-container {
    position: relative;
    display: flex;
    flex-direction: column;
}
textarea {
    width: 100%;
    min-height: 140px;
    background: #1a1a1a;
    color: #00ffcc;
    border: 1px solid #333;
    padding: 10px;
    resize: vertical;
    font-size: 16px;
    border-radius: 5px;
}
.copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #00ffcc;
    color: #0e0e0e;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    font-weight: bold;
    border-radius: 4px;
    font-size: 12px;
}
.copy-btn:hover {
    background: #00c9a7;
}
.button-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
}
button.action-btn {
    padding: 10px 16px;
    background: #00ffcc;
    border: none;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
}
button.action-btn:hover {
    background: #00c9a7;
}
.note {
    font-size: 12px;
    color: #aaa;
    text-align: center;
}
@media (max-width: 600px) {
    textarea {
        font-size: 14px;
        min-height: 120px;
    }
    .copy-btn {
        padding: 4px 8px;
        font-size: 11px;
    }
    button.action-btn {
        padding: 8px 12px;
        font-size: 14px;
    }
}
</style>
</head>
<body>

<div class="container">
    <h2>Hypocrypt Encoder / Decoder</h2>

    <div class="textarea-container">
        <label for="plain">Normal Text</label>
        <textarea id="plain"></textarea>
        <button class="copy-btn" onclick="copyText('plain')">Copy</button>
    </div>

    <div class="textarea-container">
        <label for="encoded">Hypocrypt</label>
        <textarea id="encoded"></textarea>
        <button class="copy-btn" onclick="copyText('encoded')">Copy</button>
    </div>

    <div class="button-row">
        <button class="action-btn" onclick="encode()">Encode</button>
        <button class="action-btn" onclick="decode()">Decode</button>
        <button class="action-btn" onclick="clearAll()">Clear</button>
    </div>

    <p class="note">
        Tokens are space-separated. Real space = <b>_____</b>
    </p>
</div>

<script>
// === FIXED HYPOCRYPT MAPPING ===
const charToHypo = {
    // Lowercase
    a: "-_", b: "-___-", c: "-_--_", d: "-_--__-_",
    e: "_-_", f: "_-__--_", g: "--_-_-_-_-", h: "_--__",
    i: "--__", j: "-_--__", k: "--__-", l: "_--__-",
    m: "__--_-__--", n: "_-_---_--_", o: "--_-____", p: "-_-_-__",
    q: "--_-___-", r: "-_---_", s: "-_-_-_", t: "_-_--__-_",
    u: "__--__-_", v: "_-__-__", w: "_--____-", x: "-_-___",
    y: "-___--_", z: "__--___",

    // Uppercase
    A: "--_---", B: "-___-__", C: "-_-__-__", D: "-_-__-___",
    E: "--_-__", F: "_-_-__", G: "--__-____", H: "-__-_",
    I: "_-__--", J: "_-___-", K: "_--___", L: "_-___-__-",
    M: "_-_-___", N: "--__-_", O: "--_-___-_--", P: "_--__--_",
    Q: "_--_---_", R: "--_-_", S: "_--__-__-", T: "-_-_--",
    U: "_--____--", V: "--_-__-", W: "_--___-", X: "_-__-",
    Y: "_-_---", Z: "--_-___--",

    // Numbers
    "1": "--_--_", "2": "-_-___-", "3": "--_--", "4": "-_-_-",
    "5": "-__-__", "6": "-_-_-_", "7": "_-_--", "8": "--_-_",
    "9": "--__--", "0": "-_-___-_-_--",

    // Symbols
    ".": "-_-__--", ",": "--_-__-", "?": "-__-___-_", "!": "-_-_-__-",
    "@": "__--_-_", "#": "_-_-__-", "$": "_---", "%": "__--",
    "&": "--_-___-_", "*": "__-_--", "(": "-__", ")": "__--__",
    "_": "__", "-": "_-__-", "=": "-_-_-", "+": "_--__-_",
    "/": "_-__-_", "\\": "__-__", ":": "-__--_", ";": "__--___",
    "'": "_---_", '"': "_-_-", "<": "_--_-_", ">": "_-__",
    " ": "_____"
};

const hypoToChar = {};
for (const c in charToHypo) hypoToChar[charToHypo[c]] = c;

// Encode
function encode() {
    const text = document.getElementById("plain").value;
    const out = [];
    for (const ch of text) {
        out.push(charToHypo[ch] || ch);
    }
    document.getElementById("encoded").value = out.join(" ");
}

// Decode (PRESERVE LINE BREAKS)
function decode() {
    const input = document.getElementById("encoded").value;
    const lines = input.split("\n"); // split by line
    let output = "";

    for (let line of lines) {
        const tokens = line.trim().split(/\s+/);
        for (const t of tokens) {
            output += hypoToChar[t] || t;
        }
        output += "\n"; // restore line break
    }

    document.getElementById("plain").value = output;
}

// Copy
function copyText(id) {
    const text = document.getElementById(id).value;
    navigator.clipboard.writeText(text).then(() => alert("Copied!"))
        .catch(err => alert("Copy failed: " + err));
}

// Clear
function clearAll() {
    document.getElementById("plain").value = "";
    document.getElementById("encoded").value = "";
}
</script>

</body>
</html>